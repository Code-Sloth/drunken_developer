{% extends 'quiz_base.html' %}
{% load static %}
{% load humanize %}
{% block title %}AI 소믈리에{% endblock title %}

{% block content %}
  <link rel="stylesheet" type="text/css" href="{% static 'css/quiz.css' %}">

  <div class='quiz-container' style="{% if index == 7 %}height: 950px;{% elif index == 0 %} height: 600px;{% endif %}">
    <div class='quiz-header'>

      {% if not index == 0 %}
        <div class='quiz-left'>
          <a href="javascript:window.history.back();">
            <div>
              <img class='w-100' src="{% static 'image/left.png' %}" alt="left">
            </div>
          </a>
        </div>
      {% endif %}

      <div class='quiz-title' {% if index == 0 %}style='margin-left: 130px;'{% endif %}>
        AI 소믈리에
      </div>

      <div class='quiz-close'>
        <a href="{% url 'products:index' %}">
          <div>
            <img class='w-100' src="{% static 'image/close.png' %}" alt="close">
          </div>
        </a>
      </div>
    </div>

    
    <div class='quiz-section'>

      {% if not index == 7 and not index == 0 %}
        <div class='quiz-guagebox'>
          <div class='quiz-guage' style='width: calc(100% / 6 * {{ index }})'></div>
        </div>
        
        <div class='quiz-order'>
          {{ index }} / 6
        </div>
      {% endif %}

      {% if index == 0 %}

        <div>

          <div class='zero-title'>
            1분만에<br>
            분석해 드려요
          </div>

          <div class='zero-content'>
            무슨 술을 마실지 고민되시나요?
          </div>

          <div class='zero-img'>
            <img class='w-100' src="{% static 'image/zero-back.png' %}" alt="zero-back">
            <div class='zero-ai'>
              <img class='w-100' src="{% static 'image/ai.png' %}" alt="ai">
            </div>
          </div>

          <form action="{% url 'products:quiz_response' %}" method="POST">
            {% csrf_token %}
            <input type="hidden" name='index' value='{{ index }}'>
            <button class='zero-btn' name='response' value='None' type='submit'>시작하기</button>
          </form>
        </div>

      {% elif index == 1 %}

        <div class='question-title'>
          어떤 주종을 <br>
          추천받고 싶으세요?
        </div>

        <form action="{% url 'products:quiz_response' %}" method="POST">
          {% csrf_token %}
          <input type="hidden" name='index' value='{{ index }}'>

          <div class='quiz1'>
            <button name='response' value='all' type='submit'>
              <div style='width:30px; margin-right: 20px;'>
                <img class='w-100' src="{% static 'image/전체.svg' %}" alt="전체">
              </div>
              <p>전체</p>
            </button>

            <button name='response' value='traditional' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/전통주.png' %}" alt="전통주">
              </div>
              <p>전통주</p>
            </button>

            <button name='response' value='beer' type='submit'>
              <div>
                <img style='opacity: 0.8;' class='w-100' src="{% static 'image/맥주.png' %}" alt="맥주">
              </div>
              <p>맥주</p>
            </button>

            <button name='response' value='whiskey' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/위스키.svg' %}" alt="위스키">
              </div>
              <p>위스키</p>
            </button>

            <button name='response' value='wine' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/와인.svg' %}" alt="와인">
              </div>
              <p>와인</p>
            </button>
          </div>
        </form>

      {% elif index == 2 %}
        <div class='question-title'>
          좋아하는 도수를 <br>
          선택해주세요.
        </div>

        <form action="{% url 'products:quiz_response' %}" method="POST">
          {% csrf_token %}
          <input type="hidden" name='index' value='{{ index }}'>

          <div class='quiz1'>
            <button name='response' value='0,10' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/quiz1-1.png' %}" alt="quiz1-1">
              </div>
              <p>맥주처럼 낮은 도수 (0~9도)</p>
            </button>

            <button name='response' value='10,16' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/quiz1-2.png' %}" alt="quiz1-2">
              </div>
              <p>와인처럼 중간 도수 (10~16도)</p>
            </button>

            <button name='response' value='0,100' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/quiz1-3.png' %}" alt="quiz1-3">
              </div>
              <p>도수는 상관 없어요</p>
            </button>
          </div>
        </form>
      
      {% elif index == 3 %}

      <div class='question-title'>
        달콤한 술을 <br>
        좋아하시나요?
      </div>

      <form action="{% url 'products:quiz_response' %}" method="POST">
        {% csrf_token %}
        <input type="hidden" name='index' value='{{ index }}'>

        <div class='quiz1'>
          <button name='response' value='strong' type='submit'>
            <div>
              <img class='w-100' src="{% static 'image/yes.png' %}" alt="yes">
            </div>
            <p>네!</p>
          </button>

          <button name='response' value='middle' type='submit'>
            <div>
              <img class='w-100' src="{% static 'image/nomal.png' %}" alt="nomal">
            </div>
            <p>보통이요</p>
          </button>

          <button name='response' value='low' type='submit'>
            <div>
              <img class='w-100' src="{% static 'image/no.png' %}" alt="no">
            </div>
            <p>아니요</p>
          </button>
        </div>
      </form>

      {% elif index == 4 %}

        <div class='question-title'>
          새콤한 술을 <br>
          좋아하시나요?
        </div>

        <form action="{% url 'products:quiz_response' %}" method="POST">
          {% csrf_token %}
          <input type="hidden" name='index' value='{{ index }}'>

          <div class='quiz1'>
            <button name='response' value='strong' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/yes.png' %}" alt="yes">
              </div>
              <p>네!</p>
            </button>

            <button name='response' value='middle' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/nomal.png' %}" alt="nomal">
              </div>
              <p>보통이요</p>
            </button>

            <button name='response' value='low' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/no.png' %}" alt="no">
              </div>
              <p>아니요</p>
            </button>
          </div>
        </form>

      {% elif index == 5 %}

        <div class='question-title'>
          쓴맛의 강도는 어느 정도가 <br>
          좋으세요?
        </div>

        <form action="{% url 'products:quiz_response' %}" method="POST">
          {% csrf_token %}
          <input type="hidden" name='index' value='{{ index }}'>

          <div class='quiz1'>
            <button name='response' value='strong' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/yes.png' %}" alt="yes">
              </div>
              <p>술은 써야 제 맛!</p>
            </button>

            <button name='response' value='middle' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/nomal.png' %}" alt="nomal">
              </div>
              <p>적당히 쓴 맛이 좋아요</p>
            </button>

            <button name='response' value='low' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/no.png' %}" alt="no">
              </div>
              <p>쓰지 않았으면 좋겠어요</p>
            </button>
          </div>
        </form>
      
      {% elif index == 6 %}

        <div class='question-title'>
          탄산이 있는 술을 <br>
          좋아하시나요?
        </div>

        <form action="{% url 'products:quiz_response' %}" method="POST">
          {% csrf_token %}
          <input type="hidden" name='index' value='{{ index }}'>

          <div class='quiz1'>
            <button name='response' value='True' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/yes.png' %}" alt="yes">
              </div>
              <p>네!</p>
            </button>

            <button name='response' value='False' type='submit'>
              <div>
                <img class='w-100' src="{% static 'image/nomal.png' %}" alt="nomal">
              </div>
              <p>아니요</p>
            </button>

          </div>
        </form>

      {% elif index == 7 %}

        <div class='result-box'>
          <div class='result-header'>
            <div class='result-img'>
              <img class='w-100' src="{% static 'image/result.png' %}" alt="result">
            </div>
            <div class='result-title'>
              추천이 <br>
              완료되었어요!
            </div>
          </div>

          <div class='result-content'>
            여러분의 인생술이 될 친구들이에요!
          </div>

          {% if products %}

            {% for product in products %}
              <div class='result-product'>
                <a href='{% url 'products:detail' product.pk %}'>
                  <div class='result-flex'>
                    {% if product.image %}
                      <div class='result-product-img'>
                        <img class='w-100' src="{{ product.image.url }}" alt="{{ product.title }}">
                      </div>
                    {% endif %}
                    
                    <div class='flex-grow-1 ps-2'>
                      <div class='d-flex justify-content-between'>
                        <div class='result-product-title'>
                          {{ product.title }}
                        </div>
      
                        <div class='result-product-price'>
                          {{ product.discounted_price|intcomma }}원
                        </div>
                      </div>
    
                      <div class='result-product-content'>
                        {{ product.content }}
                      </div>

                      <div class='result-product-footer'>
                        <div style='width:15px;'>
                          <img class=w-100 src="{% static 'image/star1.png' %}" alt="star1">
                        </div>
                        <div class='result-product-star'>
                          {{ product.star }}
                        </div>
                      </div>
                    </div>
                  </div>
                  
                </a>
              </div>
            {% endfor %}
          
          {% else %}
            <div class='quiz-fail'>
              적절한 술을 찾지 못했어요...
            </div>
          {% endif %}

          <div class='result-retest'>
            <a href="{% url 'products:quiz' %}">
              <div class='result-retest-box'>
                <div style='width: 15px;' class='pb-1'>
                  <img class='w-100' src="{% static 'image/back.png' %}" alt="back">
                </div>
                <div class='retest-content'>
                  테스트 다시하기
                </div>
              </div>
            </a>
          </div>
        </div>

      {% endif %}
    </div>

  </div> 


{% endblock content %}
